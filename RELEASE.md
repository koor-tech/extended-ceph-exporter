# RELEASE PROCESS

To create a new release (example is for release `v0.1.2`):

1. Increase the version according to Semantic Versioning in the [`VERSION` file](VERSION).
2. Add a new entry to the [`CHANGELOG.md`](CHANGELOG.md) with the changes and improvements listed in it.
3. Set the new version, which will be the new container image tag, in [the `Chart.yaml` of the Helm chart here](charts/extended-ceph-exporter/Chart.yaml#L24) (`appVersion:` field).
4. If the [helm chart vlues](charts/extended-ceph-exporter/values.yaml) or documentation is updated, please [run helm-docs](#running-helm-docs) (`make helm-docs`).
5. Check out a new branch, which will be used for the pull request to update the version: `git checkout -b BRANCH_NAME`
6. Commit these changes now using `git commit -s -S`.
7. Push the branch using `git push -u origin BRANCH_NAME` with these changes and create a pull request on [GitHub](https://github.com/koor-tech/extended-ceph-exporter).
8. Wait for pull request to be approved and merge it (if you have access to do so).
9. Create the new tag using `git tag v0.1.2` and then run `git push -u origin v0.1.2`
10. In a few minutes, the CI should have built and published a draft of the release here [GitHub - Releases List](https://github.com/koor-tech/extended-ceph-exporter/releases).
11. Now edit the release and use the green button to publish the release.
12. Congratulations! The release is now fully published.

## Running helm-docs
[helm-docs](https://github.com/norwoodj/helm-docs) is a tool that generates the README.md for a helm-chart automatically. We need to run helm-docs manually, and check in the resulting autogenerated README.md at the path [charts/extended-ceph-exporter/README.md](charts/extended-ceph-exporter/README.md).

Run the following command in the root of the repository:

```console
make helm-docs
```
